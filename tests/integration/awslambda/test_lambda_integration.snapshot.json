{
  "tests/integration/awslambda/test_lambda_integration.py::TestKinesisSource::test_kinesis_lambda_parallelism": {
    "describe_kinesis_stream": {
      "StreamDescription": {
        "StreamName": "<name>",
        "StreamARN": "<arn>",
        "StreamStatus": "CREATING",
        "StreamModeDetails": {
          "StreamMode": "PROVISIONED"
        },
        "Shards": "<sha>",
        "HasMoreShards": "<sha>",
        "RetentionPeriodHours": 24,
        "StreamCreationTimestamp": "<timestamp>",
        "EnhancedMonitoring": [
          {
            "ShardLevelMetrics": "<sha>"
          }
        ],
        "EncryptionType": "NONE"
      },
      "ResponseMetadata": "<response-metadata>"
    },
    "create_esm": {
      "ResponseMetadata": "<response-metadata>",
      "UUID": "<uuid>",
      "StartingPosition": "TRIM_HORIZON",
      "BatchSize": 10,
      "MaximumBatchingWindowInSeconds": 0,
      "ParallelizationFactor": 1,
      "EventSourceArn": "<arn>",
      "FunctionArn": "<arn>",
      "LastModified": "<date>",
      "LastProcessingResult": "No records processed",
      "State": "Creating",
      "StateTransitionReason": "User action",
      "DestinationConfig": {
        "OnFailure": {}
      },
      "MaximumRecordAgeInSeconds": -1,
      "BisectBatchOnFunctionError": false,
      "MaximumRetryAttempts": -1,
      "TumblingWindowInSeconds": 0,
      "FunctionResponseTypes": []
    },
    "stream_summary": {
      "StreamDescriptionSummary": {
        "StreamName": "<name>",
        "StreamARN": "<arn>",
        "StreamStatus": "ACTIVE",
        "StreamModeDetails": {
          "StreamMode": "PROVISIONED"
        },
        "RetentionPeriodHours": 24,
        "StreamCreationTimestamp": "<timestamp>",
        "EnhancedMonitoring": [
          {
            "ShardLevelMetrics": "<sha>"
          }
        ],
        "EncryptionType": "NONE",
        "OpenShardCount": "<sha>",
        "ConsumerCount": 0
      },
      "ResponseMetadata": "<response-metadata>"
    },
    "put_records_result": {
      "FailedRecordCount": 0,
      "Records": [
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        }
      ],
      "ResponseMetadata": "<response-metadata>"
    },
    "put_records_result_2": {
      "FailedRecordCount": 0,
      "Records": [
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        },
        {
          "SequenceNumber": "<seq-nr>",
          "ShardId": "<shard-id>"
        }
      ],
      "ResponseMetadata": "<response-metadata>"
    },
    "lambda_log_events": {
      "events": [
        {
          "executionStart": "<execution-start>",
          "event": {
            "Records": [
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_0",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_1",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_2",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_3",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_4",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_5",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_6",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_7",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_8",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_9",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDB9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              }
            ]
          }
        },
        {
          "executionStart": "<execution-start>",
          "event": {
            "Records": [
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_0",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_1",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_2",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_3",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_4",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_5",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_6",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_7",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_8",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              },
              {
                "kinesis": {
                  "kinesisSchemaVersion": "1.0",
                  "partitionKey": "test_9",
                  "sequenceNumber": "<seq-nr>",
                  "data": "eyJiYXRjaCI6IDF9",
                  "approximateArrivalTimestamp": "<timestamp>"
                },
                "eventSource": "aws:kinesis",
                "eventVersion": "1.0",
                "eventID": "<event-id>",
                "eventName": "<name>",
                "invokeIdentityArn": "<arn>",
                "awsRegion": "us-east-2",
                "eventSourceARN": "<arn>"
              }
            ]
          }
        }
      ]
    }
  }
}
